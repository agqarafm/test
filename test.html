<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hesablama Paneli</title>
    <style>
        /* --- Əsas Parametrlər və Animasiyalar --- */
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --text-color: #e0e0e0;
            --text-muted-color: #a0a0a0;
            --success-color: #4CAF50;
            --error-color: #F44336;
            --shadow-light: rgba(0, 0, 0, 0.3);
            --shadow-dark: rgba(0, 0, 0, 0.5);
            --sidebar-width-collapsed: 70px;
            --sidebar-width-expanded: 260px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes modalOpen {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.5); opacity: 0; }
            60% { transform: scale(1.1); opacity: 1; }
            80% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* --- Giriş (Login) Ekranı --- */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
        }

        #login-box {
            background: var(--surface-color);
            padding: 2.5rem 3rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow-dark);
            text-align: center;
            animation: bounceIn 0.6s ease-out;
        }

        #login-box h2 {
            margin-bottom: 1.5rem;
            color: var(--text-color);
        }

        #login-box input[type="password"] {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #333;
            background: var(--background-color);
            color: var(--text-color);
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        #login-box input[type="password"]:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(37, 117, 252, 0.5);
        }

        #login-box button {
            width: 100%;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            background: var(--secondary-color);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }

        #login-box button:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
        }

        #login-error {
            color: var(--error-color);
            margin-top: 1rem;
            display: none;
        }

        /* --- Əsas Tətbiq Konteyneri --- */
        #app-container {
            display: none; /* Login-dən sonra 'flex' olacaq */
            position: relative;
        }

        /* --- Sol Menyular (Sidebar) --- */
        #sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width-collapsed);
            background: var(--surface-color);
            box-shadow: 5px 0 15px var(--shadow-light);
            overflow: hidden;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

        #sidebar:hover {
            width: var(--sidebar-width-expanded);
        }

        #sidebar-header {
            display: flex;
            align-items: center;
            height: 70px;
            padding: 0 21px;
            white-space: nowrap;
        }

        #sidebar-header .icon {
            font-size: 1.8rem;
            min-width: 28px;
            text-align: center;
        }

        #sidebar-header .title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-left: 20px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        #sidebar:hover #sidebar-header .title {
            opacity: 1;
            transition-delay: 0.1s;
        }

        #sidebar nav ul {
            list-style: none;
            padding-top: 20px;
        }

        #sidebar nav li {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: background 0.3s, border-left 0.3s;
            white-space: nowrap;
            border-left: 5px solid transparent;
        }

        #sidebar nav li:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        #sidebar nav li.active {
            background: rgba(37, 117, 252, 0.1);
            border-left-color: var(--secondary-color);
        }

        #sidebar nav li .icon {
            font-size: 1.4rem;
            min-width: 30px;
            text-align: center;
        }

        #sidebar nav li .text {
            margin-left: 20px;
            font-size: 1rem;
            opacity: 0;
            transition: opacity 0.2s;
        }

        #sidebar:hover nav li .text {
            opacity: 1;
            transition-delay: 0.1s;
        }

        /* --- Əsas Məzmun (Main Content) --- */
        #main-content {
            margin-left: var(--sidebar-width-collapsed);
            padding: 2.5rem;
            width: calc(100% - var(--sidebar-width-collapsed));
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #sidebar:hover ~ #main-content {
            margin-left: var(--sidebar-width-expanded);
            width: calc(100% - var(--sidebar-width-expanded));
        }

        .page-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .page-content.active {
            display: block;
        }

        .page-header {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #333;
        }

        /* --- Ümumi Stil Elementləri --- */
        .content-box {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow-light);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-muted-color);
            font-weight: 500;
        }

        .input-group {
            display: flex;
            align-items: center;
        }

        .input-group input[type="text"],
        .input-group input[type="number"],
        .input-group select,
        textarea {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 2px solid #333;
            background: var(--background-color);
            color: var(--text-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(37, 117, 252, 0.5);
        }

        .input-group .currency-symbol {
            margin-left: 10px;
            font-size: 1rem;
            color: var(--text-muted-color);
            font-weight: 600;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            resize: vertical;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--secondary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(37, 117, 252, 0.3);
        }

        .btn-secondary {
            background: #444;
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background: #555;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: var(--error-color);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c33025;
            transform: translateY(-2px);
        }

        /* --- Nəticə Modalı (Hesablama Pəncərəsi) --- */
        #result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none; /* JS ilə 'flex' olacaq */
            justify-content: center;
            align-items: center;
            z-index: 500;
        }

        #result-modal-content {
            background: var(--surface-color);
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 40px var(--shadow-dark);
            animation: modalOpen 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            min-width: 350px;
        }

        #modal-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            color: var(--text-muted-color);
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
        }
        
        #modal-close-btn:hover {
            color: var(--text-color);
            transform: rotate(90deg);
        }

        #modal-result-icon {
            font-size: 3rem;
            color: var(--success-color);
            margin-bottom: 1rem;
        }

        #modal-result-text {
            font-size: 1.4rem;
            font-weight: 500;
            line-height: 1.6;
        }
        
        /* --- Spesifik Menyular --- */
        
        /* 5 - Qeydlər */
        #notes-list {
            margin-top: 2rem;
            display: grid;
            gap: 1rem;
        }
        
        .note-item {
            background: var(--background-color);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.3s;
        }
        
        .note-item p {
            flex: 1;
            white-space: pre-wrap; /* Qeydlərdə yeni sətirləri qoruyur */
            word-break: break-word;
        }
        
        .note-item-actions {
            display: flex;
            gap: 0.5rem;
            margin-left: 1rem;
        }
        
        .note-item-actions button {
            background: none;
            border: none;
            color: var(--text-muted-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s, transform 0.2s;
        }
        
        .note-item-actions button:hover {
            transform: scale(1.1);
        }
        .note-item-actions .edit-btn:hover { color: var(--secondary-color); }
        .note-item-actions .delete-btn:hover { color: var(--error-color); }

        /* 7 - Paket Satışları */
        #sales-list {
            margin-top: 2rem;
        }
        
        .sales-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .sales-table th, .sales-table td {
            padding: 0.8rem 1rem;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        
        .sales-table th {
            color: var(--text-muted-color);
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        
        /* 8 - ƏDV Hesabla */
        #edv-options {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .radio-option input[type="radio"] {
            display: none;
        }
        
        .radio-option .radio-visual {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #555;
            margin-right: 10px;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .radio-option input[type="radio"]:checked + .radio-visual {
            border-color: var(--secondary-color);
        }
        
        .radio-option input[type="radio"]:checked + .radio-visual::after {
            content: '';
            width: 10px;
            height: 10px;
            background: var(--secondary-color);
            border-radius: 50%;
            transform: scale(1);
            transition: transform 0.2s;
        }

        /* 9 - Faydalı Linklər */
        #links-list {
            margin-top: 2rem;
            display: grid;
            gap: 1rem;
        }
        
        .link-item {
            background: var(--background-color);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.3s;
        }
        
        .link-item a {
            flex: 1;
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1rem;
            transition: color 0.3s;
        }
        
        .link-item a:hover {
            color: var(--primary-color);
            text-decoration: underline;
        }
        
        .link-item button {
            background: none;
            border: none;
            color: var(--error-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s, transform 0.2s;
            margin-left: 1rem;
        }
        
        .link-item button:hover {
            transform: scale(1.1);
            color: #c33025;
        }
        
        /* Kiçik ekranlar üçün uyğunlaşma */
        @media (max-width: 768px) {
            #sidebar {
                width: 0; /* Mobildə tam gizli */
            }
            
            #sidebar:hover {
                width: var(--sidebar-width-expanded); /* Hover-da açılır */
            }
            
            #main-content {
                margin-left: 0;
                width: 100%;
                padding: 1.5rem;
            }
            
            #sidebar:hover ~ #main-content {
                margin-left: 0; /* Açılanda məzmunu itələməsin */
            }
            
            .page-header {
                font-size: 1.5rem;
            }
            
            #login-box {
                width: 90%;
                padding: 2rem;
            }
        }

    </style>
</head>
<body>

    <div id="login-overlay">
        <div id="login-box">
            <h2>Hesablama Paneli</h2>
            <form id="login-form">
                <div class="form-group">
                    <input type="password" id="password-input" placeholder="Giriş kodu (223366)" required>
                </div>
                <button type="submit" class="btn btn-primary">Daxil Ol</button>
                <p id="login-error">Giriş kodu səhvdir!</p>
            </form>
        </div>
    </div>

    <div id="app-container">
        
        <aside id="sidebar">
            <div id="sidebar-header">
                <span class="icon">📊</span>
                <span class="title">Hesablama Paneli</span>
            </div>
            <nav>
                <ul>
                    <li class="nav-item active" data-page="kart-hesabla">
                        <span class="icon">💳</span>
                        <span class="text">Kart məbləği hesabla</span>
                    </li>
                    <li class="nav-item" data-page="smart-qaliq">
                        <span class="icon">📱</span>
                        <span class="text">Smart qalığı hesabla</span>
                    </li>
                    <li class="nav-item" data-page="qeydler">
                        <span class="icon">📝</span>
                        <span class="text">Qeydlər</span>
                    </li>
                    <li class="nav-item" data-page="admin-panel">
                        <span class="icon">⚙️</span>
                        <span class="text">Admin panel</span>
                    </li>
                    <li class="nav-item" data-page="paket-satis">
                        <span class="icon">🛍️</span>
                        <span class="text">Paket satışları</span>
                    </li>
                    <li class="nav-item" data-page="edv-hesabla">
                        <span class="icon">📈</span>
                        <span class="text">ƏDV-hesabla</span>
                    </li>
                    <li class="nav-item" data-page="kredit-hesabla">
                        <span class="icon">🏦</span>
                        <span class="text">Kredit hesabla</span>
                    </li>
                    <li class="nav-item" data-page="faydali-linkler">
                        <span class="icon">🔗</span>
                        <span class="text">Faydalı linklər</span>
                    </li>
                </ul>
            </nav>
        </aside>

        <main id="main-content">

            <section id="page-kart-hesabla" class="page-content active">
                <h1 class="page-header">Kart məbləği hesabla</h1>
                <div class="content-box">
                    <form id="kart-hesabla-form">
                        <div class="form-group">
                            <label for="kart-arzu">Arzu</label>
                            <div class="input-group">
                                <input type="number" id="kart-arzu" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="kart-aida">Aidə</label>
                            <div class="input-group">
                                <input type="number" id="kart-aida" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="kart-gulshad">Gülşad</label>
                            <div class="input-group">
                                <input type="number" id="kart-gulshad" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Hesabla</button>
                            <button type="reset" class="btn btn-secondary" id="kart-temizle">Təmizlə</button>
                        </div>
                    </form>
                </div>
            </section>

            <section id="page-smart-qaliq" class="page-content">
                <h1 class="page-header">Smart qalığı hesabla</h1>
                <div class="content-box">
                    <form id="smart-qaliq-form">
                        <div class="form-group">
                            <label for="smart-kart-1">Kart məbləğ 1</label>
                            <div class="input-group">
                                <input type="number" id="smart-kart-1" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="smart-kart-2">Kart məbləğ 2</label>
                            <div class="input-group">
                                <input type="number" id="smart-kart-2" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="smart-nagd-1">Nağd məbləğ 1</label>
                            <div class="input-group">
                                <input type="number" id="smart-nagd-1" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="smart-nagd-2">Nağd məbləğ 2</label>
                            <div class="input-group">
                                <input type="number" id="smart-nagd-2" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                         <div class="form-group">
                            <label for="smart-nagd-qaytarma">Nağd qaytarma</label>
                            <div class="input-group">
                                <input type="number" id="smart-nagd-qaytarma" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="smart-kart-qaytarma">Kart qaytarma</label>
                            <div class="input-group">
                                <input type="number" id="smart-kart-qaytarma" placeholder="0.00" step="0.01" min="0">
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Hesabla</button>
                            <button type="reset" class="btn btn-secondary" id="smart-temizle">Təmizlə</button>
                        </div>
                    </form>
                </div>
            </section>

            <section id="page-qeydler" class="page-content">
                <h1 class="page-header">Qeydlər</h1>
                <div class="content-box">
                    <form id="notes-form">
                        <div class="form-group">
                            <label for="note-input">Yeni qeyd</label>
                            <textarea id="note-input" placeholder="Qeydinizi bura yazın..."></textarea>
                            <input type="hidden" id="note-edit-index">
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary" id="note-save-btn">Yadda Saxla</button>
                            <button type="button" class="btn btn-secondary" id="note-clear-btn" style="display: none;">Ləğv Et</button>
                        </div>
                    </form>
                    
                    <div id="notes-list">
                        </div>
                </div>
            </section>

            <section id="page-admin-panel" class="page-content">
                <h1 class="page-header">Admin panel</h1>
                
                <div class="content-box">
                    <h2>Giriş Kodunu Dəyiş</h2>
                    <form id="password-change-form">
                        <div class="form-group">
                            <label for="new-password">Yeni kod</label>
                            <div class="input-group">
                                <input type="password" id="new-password" placeholder="Yeni kodu daxil edin" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Yeni kodu təkrar edin</label>
                            <div class="input-group">
                                <input type="password" id="confirm-password" placeholder="Yeni kodu təkrar edin" required>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Dəyiş</button>
                        </div>
                        <p id="password-change-status" style="margin-top: 1rem;"></p>
                    </form>
                </div>
                
                <div class="content-box">
                    <h2>Menyu İdarəetməsi (Vizual)</h2>
                    <p style="color: var(--text-muted-color);">
                        Bu funksiya tam hüquqlu bir arxa-plan (backend) tələb edir və
                        bu HTML sənədi daxilində aktiv deyil. Bu, yalnız dizayn məqsədləri üçün
                        bir yer tutucudur.
                    </p>
                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label for="menu-select-admin">Düzəliş üçün menyu seçin</label>
                        <select id="menu-select-admin" class="input-group">
                            <option>Kart məbləği hesabla</option>
                            <option>Smart qalığı hesabla</option>
                            <option>Qeydlər</option>
                            </select>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-secondary" disabled>Düzəliş et</button>
                    </div>
                </div>
            </section>

            <section id="page-paket-satis" class="page-content">
                <h1 class="page-header">Paket satışları</h1>
                <div class="content-box">
                    <form id="paket-satis-form">
                        <div class="form-group">
                            <label for="sifaris-nomresi">Sifariş nömrəsi</label>
                            <div class="input-group">
                                <input type="text" id="sifaris-nomresi" placeholder="Sifariş nömrəsini daxil edin" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="paket-secimi">Paket seçin</label>
                            <div class="input-group">
                                <select id="paket-secimi" required>
                                    <option value="" disabled selected>Zəhmət olmasa bir paket seçin</option>
                                    <option value="Kontakt Paket 25*35 – 0.10 AZN">Kontakt Paket 25*35 – 0.10 AZN</option>
                                    <option value="Kontakt Paket 35*45 – 0.20 AZN">Kontakt Paket 35*45 – 0.20 AZN</option>
                                    <option value="Kontakt Paket 45*70 – 0.30 AZN">Kontakt Paket 45*70 – 0.30 AZN</option>
                                    <option value="Kontakt Paket 65*80 – 0.50 AZN">Kontakt Paket 65*80 – 0.50 AZN</option>
                                </select>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Əlavə et</button>
                        </div>
                    </form>
                </div>
                
                <div class="content-box" id="sales-list">
                    <h2>Qeydə Alınan Satışlar</h2>
                    <table class="sales-table">
                        <thead>
                            <tr>
                                <th>Sifariş Nömrəsi</th>
                                <th>Paket Növü və Qiyməti</th>
                                <th>Əməliyyat</th>
                            </tr>
                        </thead>
                        <tbody id="paket-satis-tbody">
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="page-edv-hesabla" class="page-content">
                <h1 class="page-header">ƏDV-hesabla (ƏDV Geri Al)</h1>
                <div class="content-box">
                    <form id="edv-hesabla-form">
                        <div class="form-group">
                            <label>Ödəniş növü</label>
                            <div id="edv-options">
                                <label class="radio-option">
                                    <input type="radio" name="payment-type" value="card" checked>
                                    <span class="radio-visual"></span>
                                    <span>Nağdsız (Kart ilə)</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="payment-type" value="cash">
                                    <span class="radio-visual"></span>
                                    <span>Nağd</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edv-mebleg">Yekun Məbləğ (Çekdəki məbləğ)</label>
                            <div class="input-group">
                                <input type="number" id="edv-mebleg" placeholder="0.00" step="0.01" min="0" required>
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Hesabla</button>
                        </div>
                    </form>
                </div>
            </section>

            <section id="page-kredit-hesabla" class="page-content">
                <h1 class="page-header">Kredit kalkulyatoru (Anuitet)</h1>
                <div class="content-box">
                    <form id="kredit-hesabla-form">
                        <div class="form-group">
                            <label for="kredit-mebleg">Kredit məbləği</label>
                            <div class="input-group">
                                <input type="number" id="kredit-mebleg" placeholder="0.00" step="100" min="0" required>
                                <span class="currency-symbol">AZN</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="kredit-faiz">İllik faiz dərəcəsi (%)</label>
                            <div class="input-group">
                                <input type="number" id="kredit-faiz" placeholder="18" step="0.1" min="0" required>
                                <span class="currency-symbol">%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="kredit-muddet">Kredit müddəti (Ay)</label>
                            <div class="input-group">
                                <input type="number" id="kredit-muddet" placeholder="12" step="1" min="1" required>
                                <span class="currency-symbol">ay</span>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Hesabla</button>
                        </div>
                    </form>
                </div>
            </section>

            <section id="page-faydali-linkler" class="page-content">
                <h1 class="page-header">Faydalı linklər</h1>
                <div class="content-box">
                    <form id="links-form">
                         <div class="form-group">
                            <label for="link-title">Link Başlığı</label>
                            <div class="input-group">
                                <input type="text" id="link-title" placeholder="Məs: Google" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="link-url">Link URL</label>
                            <div class="input-group">
                                <input type="text" id="link-url" placeholder="Məs: https://www.google.com" required>
                            </div>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Əlavə et</button>
                        </div>
                    </form>
                </div>
                
                <div class="content-box">
                    <h2>Yadda saxlanılan linklər</h2>
                    <div id="links-list">
                        </div>
                </div>
            </section>

        </main>
    </div>

    <div id="result-modal">
        <div id="result-modal-content">
            <span id="modal-close-btn">&times;</span>
            <div id="modal-result-icon">🎉</div>
            <div id="modal-result-text">
                </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Əsas Elementlər ---
            const loginOverlay = document.getElementById('login-overlay');
            const loginForm = document.getElementById('login-form');
            const passwordInput = document.getElementById('password-input');
            const loginError = document.getElementById('login-error');
            const appContainer = document.getElementById('app-container');
            const navItems = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.page-content');
            const resultModal = document.getElementById('result-modal');
            const modalResultText = document.getElementById('modal-result-text');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            // --- 1. GİRİŞ (LOGIN) SİSTEMİ ---
            
            // Parolu localStorage-dan al və ya standart kodu istifadə et
            let correctPassword = localStorage.getItem('hesablamaAppPassword') || '223366';

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (passwordInput.value === correctPassword) {
                    // Uğurlu giriş
                    loginOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loginOverlay.style.display = 'none';
                        appContainer.style.display = 'flex'; // Əsas tətbiqi göstər
                    }, 500); // Animasiya ilə eyni vaxt
                } else {
                    // Səhv kod
                    loginError.style.display = 'block';
                    passwordInput.style.borderColor = 'var(--error-color)';
                }
            });

            // --- 2. NAVİQASİYA (MENYU) SİSTEMİ ---
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Aktiv klassını dəyiş
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');

                    // Səhifəni göstər
                    const targetPageId = 'page-' + item.getAttribute('data-page');
                    pages.forEach(page => {
                        if (page.id === targetPageId) {
                            page.classList.add('active');
                        } else {
                            page.classList.remove('active');
                        }
                    });
                });
            });
            
            // --- ÜMUMİ FUNKSİYALAR (MODAL VƏ YADDAŞ) ---

            // Nəticə modalını göstərən funksiya
            function showModal(htmlContent) {
                modalResultText.innerHTML = htmlContent;
                resultModal.style.display = 'flex';
            }
            // Modalı bağla
            modalCloseBtn.addEventListener('click', () => {
                resultModal.style.display = 'none';
            });
            resultModal.addEventListener('click', (e) => {
                if (e.target === resultModal) {
                    resultModal.style.display = 'none';
                }
            });

            // LocalStorage üçün köməkçi funksiyalar
            function saveToLocal(key, value) {
                localStorage.setItem(key, value);
            }
            function getFromLocal(key, defaultValue = '') {
                return localStorage.getItem(key) || defaultValue;
            }
            function saveJsonToLocal(key, data) {
                localStorage.setItem(key, JSON.stringify(data));
            }
            function getJsonFromLocal(key) {
                return JSON.parse(localStorage.getItem(key)) || [];
            }
            
            // Inputları yadda saxlamaq və yükləmək üçün
            function autoSaveInput(inputId) {
                const input = document.getElementById(inputId);
                if(input) {
                    input.value = getFromLocal(inputId); // Səhifə yüklənəndə yüklə
                    input.addEventListener('input', () => { // Yazdıqca yadda saxla
                        saveToLocal(inputId, input.value);
                    });
                }
            }
            
            function clearLocalInputs(keys) {
                keys.forEach(key => {
                    localStorage.removeItem(key);
                    document.getElementById(key).value = '';
                });
            }

            // --- 3. "KART MƏBLƏĞİ HESABLA" ---
            const kartForm = document.getElementById('kart-hesabla-form');
            const kartInputs = ['kart-arzu', 'kart-aida', 'kart-gulshad'];
            kartInputs.forEach(autoSaveInput); // Inputları avtomatik yadda saxla/yüklə
            
            kartForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const arzu = parseFloat(document.getElementById('kart-arzu').value) || 0;
                const aida = parseFloat(document.getElementById('kart-aida').value) || 0;
                const gulshad = parseFloat(document.getElementById('kart-gulshad').value) || 0;
                const total = arzu + aida + gulshad;
                
                showModal(`Yekun Məbləğ:<br><strong style="font-size: 2rem; color: var(--success-color);">${total.toFixed(2)} AZN</strong>`);
            });
            
            document.getElementById('kart-temizle').addEventListener('click', () => {
                clearLocalInputs(kartInputs);
            });

            // --- 4. "SMART QALIĞI HESABLA" ---
            const smartForm = document.getElementById('smart-qaliq-form');
            const smartInputs = [
                'smart-kart-1', 'smart-kart-2', 
                'smart-nagd-1', 'smart-nagd-2', 
                'smart-nagd-qaytarma', 'smart-kart-qaytarma'
            ];
            smartInputs.forEach(autoSaveInput);
            
            smartForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const kart1 = parseFloat(document.getElementById('smart-kart-1').value) || 0;
                const kart2 = parseFloat(document.getElementById('smart-kart-2').value) || 0;
                const nagd1 = parseFloat(document.getElementById('smart-nagd-1').value) || 0;
                const nagd2 = parseFloat(document.getElementById('smart-nagd-2').value) || 0;
                const nagdQaytarma = parseFloat(document.getElementById('smart-nagd-qaytarma').value) || 0;
                const kartQaytarma = parseFloat(document.getElementById('smart-kart-qaytarma').value) || 0;
                
                const gelir = kart1 + kart2 + nagd1 + nagd2;
                const xercl = nagdQaytarma + kartQaytarma;
                const qaliq = gelir - xercl;
                
                showModal(`Yekun Qalıq:<br><strong style="font-size: 2rem; color: var(--success-color);">${qaliq.toFixed(2)} AZN</strong>`);
            });
            
            document.getElementById('smart-temizle').addEventListener('click', () => {
                clearLocalInputs(smartInputs);
            });
            
            // --- 5. "QEYDLƏR" (CRUD) ---
            const notesForm = document.getElementById('notes-form');
            const noteInput = document.getElementById('note-input');
            const notesList = document.getElementById('notes-list');
            const noteEditIndex = document.getElementById('note-edit-index');
            const noteSaveBtn = document.getElementById('note-save-btn');
            const noteClearBtn = document.getElementById('note-clear-btn');
            
            let notes = getJsonFromLocal('appNotes');
            
            function renderNotes() {
                notesList.innerHTML = '';
                if (notes.length === 0) {
                    notesList.innerHTML = '<p style="color: var(--text-muted-color); text-align: center;">Hələ heç bir qeyd yoxdur.</p>';
                    return;
                }
                notes.forEach((note, index) => {
                    const noteItem = document.createElement('div');
                    noteItem.className = 'note-item';
                    noteItem.innerHTML = `
                        <p>${note.replace(/\n/g, '<br>')}</p> <div class="note-item-actions">
                            <button class="edit-btn" data-index="${index}" title="Düzəliş et">✏️</button>
                            <button class="delete-btn" data-index="${index}" title="Sil">🗑️</button>
                        </div>
                    `;
                    notesList.appendChild(noteItem);
                });
            }
            
            notesForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const noteText = noteInput.value.trim();
                const editIndex = noteEditIndex.value;
                
                if (noteText) {
                    if (editIndex !== '') {
                        // Düzəliş rejimi
                        notes[editIndex] = noteText;
                        noteSaveBtn.innerText = 'Yadda Saxla';
                        noteClearBtn.style.display = 'none';
                        noteEditIndex.value = '';
                    } else {
                        // Yeni qeyd
                        notes.push(noteText);
                    }
                    saveJsonToLocal('appNotes', notes);
                    renderNotes();
                    noteInput.value = '';
                }
            });
            
            noteClearBtn.addEventListener('click', () => {
                noteInput.value = '';
                noteEditIndex.value = '';
                noteSaveBtn.innerText = 'Yadda Saxla';
                noteClearBtn.style.display = 'none';
            });
            
            notesList.addEventListener('click', (e) => {
                if (e.target.classList.contains('delete-btn')) {
                    if (confirm('Bu qeydi silməyə əminsiniz?')) {
                        const index = e.target.getAttribute('data-index');
                        notes.splice(index, 1);
                        saveJsonToLocal('appNotes', notes);
                        renderNotes();
                    }
                }
                
                if (e.target.classList.contains('edit-btn')) {
                    const index = e.target.getAttribute('data-index');
                    noteInput.value = notes[index];
                    noteEditIndex.value = index;
                    noteSaveBtn.innerText = 'Düzəlişi Təsdiqlə';
                    noteClearBtn.style.display = 'inline-block';
                    noteInput.focus();
                }
            });
            
            renderNotes(); // Səhifə yüklənəndə qeydləri göstər

            // --- 6. "ADMIN PANEL" ---
            const passwordChangeForm = document.getElementById('password-change-form');
            const newPassword = document.getElementById('new-password');
            const confirmPassword = document.getElementById('confirm-password');
            const passwordStatus = document.getElementById('password-change-status');
            
            passwordChangeForm.addEventListener('submit', (e) => {
                e.preventDefault();
                passwordStatus.innerText = '';
                
                if (newPassword.value.length < 4) {
                     passwordStatus.innerText = 'Kod ən azı 4 simvoldan ibarət olmalıdır.';
                     passwordStatus.style.color = 'var(--error-color)';
                     return;
                }
                
                if (newPassword.value !== confirmPassword.value) {
                    passwordStatus.innerText = 'Kodlar eyni deyil!';
                    passwordStatus.style.color = 'var(--error-color)';
                    return;
                }
                
                // Uğurlu dəyişiklik
                correctPassword = newPassword.value; // Dəyişəni yenilə
                saveToLocal('hesablamaAppPassword', correctPassword); // Yaddaşda yenilə
                
                passwordStatus.innerText = 'Kod uğurla dəyişdirildi!';
                passwordStatus.style.color = 'var(--success-color)';
                newPassword.value = '';
                confirmPassword.value = '';
                
                setTimeout(() => { passwordStatus.innerText = ''; }, 3000);
            });
            
            // --- 7. "PAKET SATIŞLARI" ---
            const paketSatisForm = document.getElementById('paket-satis-form');
            const sifarisInput = document.getElementById('sifaris-nomresi');
            const paketInput = document.getElementById('paket-secimi');
            const paketSatisTbody = document.getElementById('paket-satis-tbody');
            
            let paketSales = getJsonFromLocal('appPaketSales');
            
            function renderPaketSales() {
                paketSatisTbody.innerHTML = '';
                if(paketSales.length === 0) {
                     paketSatisTbody.innerHTML = '<tr><td colspan="3" style="text-align: center; color: var(--text-muted-color);">Heç bir satış qeydə alınmayıb.</td></tr>';
                     return;
                }
                paketSales.forEach((sale, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${sale.sifaris}</td>
                        <td>${sale.paket}</td>
                        <td><button class="btn-danger" data-index="${index}" style="padding: 5px 10px; font-size: 0.8rem;">Sil</button></td>
                    `;
                    paketSatisTbody.appendChild(row);
                });
            }
            
            paketSatisForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const sifaris = sifarisInput.value.trim();
                const paket = paketInput.value;
                
                if (sifaris && paket) {
                    paketSales.push({ sifaris, paket });
                    saveJsonToLocal('appPaketSales', paketSales);
                    renderPaketSales();
                    sifarisInput.value = '';
                    paketInput.value = '';
                }
            });
            
            paketSatisTbody.addEventListener('click', (e) => {
                if (e.target.classList.contains('btn-danger')) {
                    if (confirm('Bu satışı silməyə əminsiniz?')) {
                        const index = e.target.getAttribute('data-index');
                        paketSales.splice(index, 1);
                        saveJsonToLocal('appPaketSales', paketSales);
                        renderPaketSales();
                    }
                }
            });
            
            renderPaketSales(); // Səhifə yüklənəndə

            // --- 8. "ƏDV HESABLA" ---
            const edvForm = document.getElementById('edv-hesabla-form');
            const edvMeblegInput = document.getElementById('edv-mebleg');
            
            edvForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const totalAmount = parseFloat(edvMeblegInput.value) || 0;
                const paymentType = document.querySelector('input[name="payment-type"]:checked').value;
                
                if (totalAmount <= 0) return;
                
                // ƏDV məbləğini hesabla (Yekun məbləğdən)
                // (Yekun Məbləğ / 1.18) * 0.18
                const VATE_RATE = 0.18;
                const vatAmount = (totalAmount / (1 + VATE_RATE)) * VATE_RATE;
                
                // Qaytarılma faizləri (Azərbaycan qanunvericiliyinə uyğun)
                const CASH_REFUND_RATE = 0.10; // Nağd: ƏDV-nin 10%-i
                const CARD_REFUND_RATE = 0.15; // Nağdsız: ƏDV-nin 15%-i
                
                let refundRate = (paymentType === 'card') ? CARD_REFUND_RATE : CASH_REFUND_RATE;
                let refundAmount = vatAmount * refundRate;
                
                showModal(`
                    Ümumi Məbləğ: <strong>${totalAmount.toFixed(2)} AZN</strong><br>
                    ƏDV (18%): <strong>${vatAmount.toFixed(2)} AZN</strong><br>
                    Qaytarılacaq məbləğ (${paymentType === 'card' ? '15%' : '10%'}): 
                    <strong style="font-size: 1.8rem; color: var(--success-color);">${refundAmount.toFixed(2)} AZN</strong>
                `);
            });

            // --- 9. "KREDİT HESABLA" ---
            const kreditForm = document.getElementById('kredit-hesabla-form');
            kreditForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const P = parseFloat(document.getElementById('kredit-mebleg').value); // Əsas məbləğ
                const annualRate = parseFloat(document.getElementById('kredit-faiz').value); // İllik faiz
                const n = parseInt(document.getElementById('kredit-muddet').value); // Müddət (ay)
                
                // Aylıq faiz dərəcəsi
                const r = (annualRate / 100) / 12;
                
                if (P <= 0 || r <= 0 || n <= 0) {
                     showModal('Zəhmət olmasa bütün xanaları düzgün daxil edin.');
                     return;
                }
                
                // Anuitet formulu: M = P * [r(1+r)^n] / [(1+r)^n - 1]
                const monthlyPayment = P * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
                const totalPayment = monthlyPayment * n;
                const totalInterest = totalPayment - P;
                
                showModal(`
                    Aylıq Ödəniş: <strong style="font-size: 1.8rem; color: var(--success-color);">${monthlyPayment.toFixed(2)} AZN</strong><br>
                    Ümumi Ödəniş: <strong>${totalPayment.toFixed(2)} AZN</strong><br>
                    Cəmi Faiz: <strong>${totalInterest.toFixed(2)} AZN</strong>
                `);
            });

            // --- 10. "FAYDALI LİNKLƏR" ---
            const linksForm = document.getElementById('links-form');
            const linkTitleInput = document.getElementById('link-title');
            const linkUrlInput = document.getElementById('link-url');
            const linksList = document.getElementById('links-list');
            
            let usefulLinks = getJsonFromLocal('appUsefulLinks');
            
            function renderLinks() {
                linksList.innerHTML = '';
                if (usefulLinks.length === 0) {
                    linksList.innerHTML = '<p style="color: var(--text-muted-color); text-align: center;">Heç bir link əlavə edilməyib.</p>';
                    return;
                }
                usefulLinks.forEach((link, index) => {
                    const linkItem = document.createElement('div');
                    linkItem.className = 'link-item';
                    linkItem.innerHTML = `
                        <a href="${link.url}" target="_blank">${link.title}</a>
                        <button class="delete-link-btn" data-index="${index}" title="Sil">🗑️</button>
                    `;
                    linksList.appendChild(linkItem);
                });
            }
            
            linksForm.addEventListener('submit', (e) => {
                e.preventDefault();
                let title = linkTitleInput.value.trim();
                let url = linkUrlInput.value.trim();
                
                // URL-ə http/https əlavə et (əgər yoxdursa)
                if (url && !url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                
                if (title && url) {
                    usefulLinks.push({ title, url });
                    saveJsonToLocal('appUsefulLinks', usefulLinks);
                    renderLinks();
                    linkTitleInput.value = '';
                    linkUrlInput.value = '';
                }
            });
            
            linksList.addEventListener('click', (e) => {
                if (e.target.classList.contains('delete-link-btn')) {
                    if (confirm('Bu linki silməyə əminsiniz?')) {
                        const index = e.target.getAttribute('data-index');
                        usefulLinks.splice(index, 1);
                        saveJsonToLocal('appUsefulLinks', usefulLinks);
                        renderLinks();
                    }
                }
            });
            
            renderLinks(); // Səhifə yüklənəndə

        });
    </script>
</body>
</html>
