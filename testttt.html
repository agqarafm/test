<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arayış Forması</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            background-color: #f0f0f0;
            padding: 20px 0;
            display: flex;
            justify-content: center;
        }
        .page {
            background: white;
            width: 210mm; /* A4 width */
            min-height: 297mm; /* A4 height */
            padding: 20mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            box-sizing: border-box;
            display: none; /* SƏNƏDİ İLKİN OLARAQ GİZLƏDİR */
        }
        .document-container {
             font-size: 14px;
        }
        .header {
            text-align: left;
            border-bottom: 2px solid black;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .header img {
            width: 200px;
        }
        .contact-info {
            font-size: 12px;
            text-align: left;
            margin-top: 5px;
        }
        .document-title {
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            margin-top: 30px;
            margin-bottom: 30px;
        }
        .info-section {
            margin-bottom: 20px;
        }
        .info-section p {
            text-indent: 20px;
            line-height: 1.5;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th {
            font-weight: bold;
        }
        .footer {
            margin-top: 40px;
        }
        .footer-line {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }
        .form-section {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            width: 210mm; /* A4 width */
            box-sizing: border-box;
            /* Bu blok ilkin olaraq görünür */
        }
        .form-section h3 {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-input {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .form-input label {
            width: 150px;
            font-weight: bold;
        }
        .form-input input, .form-input select {
            width: calc(100% - 160px);
            padding: 5px;
            box-sizing: border-box;
        }
        .form-buttons {
            text-align: center;
            margin-top: 20px;
        }
        .form-buttons button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }

        .view-button-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .view-button-container button {
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        @media print {
            body {
                background-color: white;
                padding: 0;
                display: block;
            }
            .page {
                box-shadow: none;
                margin: 0;
                padding: 0;
                width: 100%;
                min-height: auto;
                display: block !important;
            }
            .form-section, .view-button-container {
                display: none !important;
            }
            #product-table th:last-child,
            #product-table td:last-child {
                display: none;
            }
        }
        @page {
            size: A4;
            margin: 20mm;
        }
    </style>
</head>
<body>
    <div class="view-button-container">
        <button id="view-result-btn" onclick="toggleView()">Yekun Nəticəyə Bax</button>
    </div>

    <div>
        <div class="page">
            <div class="document-container">
                <div class="header">
                    <img src="logo.jpg" alt="ABC Telecom Logo">
                    <div class="contact-info">
                        Tel.: (+99412) 310 09 90 / 310 30 13; e-mail: office@abc-telecom.az <br>
                        Binəqədi rayonu, Svetlana Məmmədova küçəsi 107, AZ 1113, Bakı, Azərbaycan
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between;">
                    <span id="doc-date-location">Tarix : 02.10.2025, Oğuz Rayonu,</span>
                    <span id="doc-number">0044</span>
                </div>

                <h1 class="document-title">A R A Y I Ş</h1>

                <div class="info-section">
                    <p>
                        Verilir <b id="doc-fullname">RZALI FƏRHAD NEYMƏT oğluna</b> (<b id="doc-fin">4YSDYV7</b>) ondan ötrü ki ,“ABC Telecom ” MMC-yə məxsus “ Kontakt Home ” mağazalar şəbəkəsindən əldə edilmiş aşağıda göstərilən məhsul(lar) və müqavilə(lər) üzrə Cəmiyyətimizə olan hal-hazırda qalıq borcu aşağıdakı cədvəldə göstərilib:
                    </p>
                </div>

                <table id="product-table">
                    <thead>
                        <tr>
                            <th>Məhsulun adı</th>
                            <th>Satış tarixi</th>
                            <th>Kredit dəyəri cəm</th>
                            <th>Borc</th>
                            <th>Kredit/statusu</th>
                            <th>Müqavilə nömrəsi</th>
                            <th class="no-print">Əməliyyat</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>

                <p>Arayış tələb olunan yerə təqdim edilmək üçün verilir.</p>

                <div class="footer">
                    <p>Hörmətlə</p>
                    <div class="footer-line">
                        <span><b>Mağaza rəhbəri:</b></span>
                        <span id="manager-name-output"><b>Elnur Mürsəlov</b></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Məlumatların Daxil Edilməsi Paneli</h3>
            <div class="form-input">
                <label for="date-input">Tarix:</label>
                <input type="date" id="date-input">
            </div>
            <div class="form-input">
                <label for="location-input">Rayon:</label>
                <input type="text" id="location-input" value="Oğuz Rayonu">
            </div>
            <div class="form-input">
                <label for="number-input">Arayış No:</label>
                <input type="text" id="number-input" value="0044">
            </div>
            <div class="form-input">
                <label for="fullname-input">Ad, Soyad, Ata adı:</label>
                <input type="text" id="fullname-input" value="RZALI FƏRHAD NEYMƏT oğlu">
            </div>
            <div class="form-input">
                <label for="fin-input">FİN kod:</label>
                <input type="text" id="fin-input" value="4YSDYV7">
            </div>
            <div class="form-input">
                <label for="manager-name-input">Mağaza rəhbəri:</label>
                <input type="text" id="manager-name-input" value="Elnur Mürsəlov">
            </div>
            <hr>
            <h4>Yeni Məhsul Əlavə Et</h4>
            <div class="form-input">
                <label for="product-name">Məhsulun adı:</label>
                <input type="text" id="product-name" placeholder="Məhsulun adını daxil edin">
            </div>
            <div class="form-input">
                <label for="sale-date">Satış tarixi:</label>
                <input type="text" id="sale-date" placeholder="gg.aa.iiii">
            </div>
            <div class="form-input">
                <label for="credit-value">Kredit dəyəri cəm:</label>
                <input type="text" id="credit-value" placeholder="Məbləği daxil edin" onblur="formatCurrency(this)">
            </div>
            <div class="form-input">
                <label for="credit-status">Kredit/statusu:</label>
                <select id="credit-status">
                    <option value="BAĞLI">BAĞLI</option>
                    <option value="AÇIQ">AÇIQ</option>
                </select>
            </div>
            <div class="form-input">
                <label for="contract-number">Müqavilə nömrəsi:</label>
                <input type="text" id="contract-number" placeholder="Müqavilə nömrəsi">
            </div>
            <div class="form-buttons">
                <button onclick="updateDocumentInfo()">Sənəd Məlumatını Yenilə</button>
                <button onclick="addProduct()">Məhsul Əlavə Et</button>
                <button onclick="window.print()">PDF Hazırla</button>
                <button onclick="window.print()">Çap Et</button>
            </div>
        </div>
    </div>

    <script>
        function toggleView() {
            const page = document.querySelector('.page');
            const form = document.querySelector('.form-section');
            const btn = document.getElementById('view-result-btn');

            if (page.style.display === 'none' || page.style.display === '') {
                // Yekun nəticəyə baxmazdan əvvəl məlumatları yeniləyirik
                updateDocumentInfo();
                page.style.display = 'block';
                form.style.display = 'none';
                btn.textContent = 'Formaya Geri Dön';
            } else {
                page.style.display = 'none';
                form.style.display = 'block';
                btn.textContent = 'Yekun Nəticəyə Bax';
            }
        }

        function formatCurrency(input) {
            let value = input.value.trim().replace(/\s*AZN/i, '');
            if (value && !isNaN(value)) {
                input.value = value + ' AZN';
            }
        }

        function updateDocumentInfo() {
            const dateInput = document.getElementById('date-input').value;
            const locationInput = document.getElementById('location-input').value;
            const numberInput = document.getElementById('number-input').value;
            const fullnameInput = document.getElementById('fullname-input').value;
            const finInput = document.getElementById('fin-input').value;
            const managerName = document.getElementById('manager-name-input').value;
            
            let formattedDate = '';
            if (dateInput) {
                const date = new Date(dateInput);
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const year = date.getFullYear();
                formattedDate = `${day}.${month}.${year}`;
            }
            document.getElementById('doc-date-location').innerText = `Tarix : ${formattedDate}, ${locationInput},`;
            document.getElementById('doc-number').innerText = numberInput;
            document.getElementById('doc-fullname').innerText = `${fullnameInput.replace("oğlu", " ")}oğluna`;
            document.getElementById('doc-fin').innerText = finInput;
            document.getElementById('manager-name-output').innerHTML = `<b>${managerName}</b>`;
        }

        function addProduct() {
            const productName = document.getElementById('product-name').value;
            const saleDate = document.getElementById('sale-date').value;
            const creditValue = document.getElementById('credit-value').value;
            const creditStatus = document.getElementById('credit-status').value;
            const contractNumber = document.getElementById('contract-number').value;

            if (!productName || !saleDate || !creditValue || !creditStatus || !contractNumber) {
                alert("Zəhmət olmasa, bütün məhsul xanalarını doldurun.");
                return;
            }
            const tableBody = document.getElementById('product-table').getElementsByTagName('tbody')[0];
            const newRow = tableBody.insertRow();
            newRow.innerHTML = `
                <td>${productName}</td>
                <td>${saleDate}</td>
                <td>${creditValue}</td>
                <td>0 AZN</td>
                <td>${creditStatus}</td>
                <td>${contractNumber}</td>
                <td><button onclick="deleteRow(this)">Sil</button></td>
            `;
            document.getElementById('product-name').value = '';
            document.getElementById('sale-date').value = '';
            document.getElementById('credit-value').value = '';
            document.getElementById('credit-status').value = 'BAĞLI';
            document.getElementById('contract-number').value = '';
        }

        function deleteRow(button) {
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }
        
        // Formadakı tarix xanasını bugünkü tarixlə doldurur
        document.getElementById('date-input').valueAsDate = new Date();
    </script>
</body>
</html>
